package com.path.model;

import java.sql.Timestamp;
import java.util.Base64;
import java.util.List;

public class PathService {

	private PathDAO_interface dao;//為了框架所以使用介面多型宣告,可以做到0相依性

	public PathService() {
		dao = new PathJNDIDAO();
	}

	public String addPath() {

		PathVO pathVO = new PathVO();

		dao.insert(pathVO);

		return pathVO.getPath_no();
	}

	public PathVO updatePath(String path_name, Integer path_difficulty, java.sql.Timestamp path_end, Double path_distance, String path_kml, Double path_lat, Double path_lng, String path_no, String path_pic) {

		PathVO pathVO = new PathVO();

		pathVO.setPath_name(path_name);
		pathVO.setPath_difficulty(path_difficulty);
		pathVO.setPath_end(path_end);
		pathVO.setPath_distance(path_distance);
		pathVO.setPath_kml(path_kml);
		pathVO.setPath_lng(path_lng);
		pathVO.setPath_lat(path_lat);
		pathVO.setPath_no(path_no);
		byte[] path_picByte = Base64.getMimeDecoder().decode(path_pic);
		pathVO.setPath_pic(path_picByte);
		dao.update(pathVO);
		

		return pathVO;
	}

	public void deletePath(String path_no) {
		dao.delete(path_no);
	}

	public PathVO getOnePath(String path_no) {
		return dao.findByPrimaryKey(path_no);
	}

	public List<PathVO> getAll() {
		return dao.getAll();
	}
	
	public byte[] getImage(String path_no) {
		return dao.getImage(path_no);
	}
	
	public String insertPathFromWeb(byte[] path_pic) {
		PathVO pathVO = new PathVO();
		pathVO.setPath_name("");
		pathVO.setPath_kml("[{\"latitude\":24.9679234,\"longitude\":121.1903092},{\"latitude\":24.9679234,\"longitude\":121.1903092},{\"latitude\":24.968009,\"longitude\":121.190389},{\"latitude\":24.9680371,\"longitude\":121.1903903},{\"latitude\":24.9680586,\"longitude\":121.1904171},{\"latitude\":24.968074,\"longitude\":121.1904228},{\"latitude\":24.9680984,\"longitude\":121.1904354},{\"latitude\":24.9682171,\"longitude\":121.1903713},{\"latitude\":24.9681989,\"longitude\":121.1903619},{\"latitude\":24.9682084,\"longitude\":121.1903598},{\"latitude\":24.9681361,\"longitude\":121.1903413},{\"latitude\":24.9681504,\"longitude\":121.1903465},{\"latitude\":24.9681774,\"longitude\":121.1903318},{\"latitude\":24.9681936,\"longitude\":121.1903082},{\"latitude\":24.968208,\"longitude\":121.1902953},{\"latitude\":24.9682306,\"longitude\":121.1902872},{\"latitude\":24.9682518,\"longitude\":121.1902801},{\"latitude\":24.9682614,\"longitude\":121.1902482},{\"latitude\":24.9682745,\"longitude\":121.1902335},{\"latitude\":24.9683054,\"longitude\":121.1902185},{\"latitude\":24.9683195,\"longitude\":121.1902116},{\"latitude\":24.968338,\"longitude\":121.190208},{\"latitude\":24.9683597,\"longitude\":121.190209},{\"latitude\":24.9684115,\"longitude\":121.190218},{\"latitude\":24.9684761,\"longitude\":121.1902168},{\"latitude\":24.9686634,\"longitude\":121.1902407},{\"latitude\":24.9688317,\"longitude\":121.1902579},{\"latitude\":24.9689574,\"longitude\":121.1902414},{\"latitude\":24.9690186,\"longitude\":121.1902026},{\"latitude\":24.9690491,\"longitude\":121.1901514},{\"latitude\":24.9690374,\"longitude\":121.1900742},{\"latitude\":24.9690314,\"longitude\":121.1900402},{\"latitude\":24.9690041,\"longitude\":121.1899466},{\"latitude\":24.9689804,\"longitude\":121.1899068},{\"latitude\":24.9689423,\"longitude\":121.1898545},{\"latitude\":24.968908,\"longitude\":121.1898121},{\"latitude\":24.9688676,\"longitude\":121.1897686},{\"latitude\":24.9688489,\"longitude\":121.1897586},{\"latitude\":24.9687852,\"longitude\":121.1897305},{\"latitude\":24.9687418,\"longitude\":121.1897076},{\"latitude\":24.9687034,\"longitude\":121.1897038},{\"latitude\":24.9686585,\"longitude\":121.1896919},{\"latitude\":24.9686228,\"longitude\":121.189681},{\"latitude\":24.9685775,\"longitude\":121.1896635},{\"latitude\":24.9685375,\"longitude\":121.1896513},{\"latitude\":24.9685178,\"longitude\":121.1896237},{\"latitude\":24.9684743,\"longitude\":121.1896216},{\"latitude\":24.9684159,\"longitude\":121.189621},{\"latitude\":24.968366,\"longitude\":121.1896256},{\"latitude\":24.9682964,\"longitude\":121.1896575},{\"latitude\":24.9682342,\"longitude\":121.1896649},{\"latitude\":24.9681774,\"longitude\":121.1896641},{\"latitude\":24.968128,\"longitude\":121.1896555},{\"latitude\":24.9680659,\"longitude\":121.1896547},{\"latitude\":24.9679845,\"longitude\":121.1896421},{\"latitude\":24.9679366,\"longitude\":121.1896537},{\"latitude\":24.9678854,\"longitude\":121.1896622},{\"latitude\":24.9678424,\"longitude\":121.1896827},{\"latitude\":24.9677897,\"longitude\":121.1897146},{\"latitude\":24.9677464,\"longitude\":121.1897423},{\"latitude\":24.9677095,\"longitude\":121.1897768},{\"latitude\":24.9676696,\"longitude\":121.1898251},{\"latitude\":24.9676412,\"longitude\":121.1898749},{\"latitude\":24.9676218,\"longitude\":121.189926},{\"latitude\":24.9676138,\"longitude\":121.1899738},{\"latitude\":24.9676164,\"longitude\":121.1900266},{\"latitude\":24.9676306,\"longitude\":121.1900839},{\"latitude\":24.9676464,\"longitude\":121.1901358},{\"latitude\":24.9676708,\"longitude\":121.1901801},{\"latitude\":24.9676778,\"longitude\":121.1901897},{\"latitude\":24.9676981,\"longitude\":121.1902147},{\"latitude\":24.9677262,\"longitude\":121.1902302},{\"latitude\":24.9677696,\"longitude\":121.1902496},{\"latitude\":24.9678133,\"longitude\":121.1902645},{\"latitude\":24.9678596,\"longitude\":121.1902609},{\"latitude\":24.967893,\"longitude\":121.1902292},{\"latitude\":24.9679401,\"longitude\":121.1902475},{\"latitude\":24.9679941,\"longitude\":121.1902756},{\"latitude\":24.9680385,\"longitude\":121.1902846},{\"latitude\":24.9680735,\"longitude\":121.1902759},{\"latitude\":24.9681224,\"longitude\":121.1902972},{\"latitude\":24.9681862,\"longitude\":121.1903148},{\"latitude\":24.9682402,\"longitude\":121.1903292},{\"latitude\":24.9682877,\"longitude\":121.1903445},{\"latitude\":24.9683428,\"longitude\":121.1903605},{\"latitude\":24.968394,\"longitude\":121.1903763},{\"latitude\":24.9684551,\"longitude\":121.1903837},{\"latitude\":24.968496,\"longitude\":121.1903679},{\"latitude\":24.9684939,\"longitude\":121.1902784},{\"latitude\":24.9685418,\"longitude\":121.1902603},{\"latitude\":24.9686073,\"longitude\":121.190242},{\"latitude\":24.9686491,\"longitude\":121.1902135},{\"latitude\":24.968708,\"longitude\":121.1901621},{\"latitude\":24.9687417,\"longitude\":121.1901081},{\"latitude\":24.9687698,\"longitude\":121.1900593},{\"latitude\":24.9687799,\"longitude\":121.1900164},{\"latitude\":24.96878,\"longitude\":121.1899788},{\"latitude\":24.9687736,\"longitude\":121.1899453},{\"latitude\":24.9687569,\"longitude\":121.1899051},{\"latitude\":24.9687231,\"longitude\":121.1898627},{\"latitude\":24.9687182,\"longitude\":121.1898316},{\"latitude\":24.9686955,\"longitude\":121.1898045},{\"latitude\":24.9686662,\"longitude\":121.1897773},{\"latitude\":24.9686487,\"longitude\":121.1897479},{\"latitude\":24.968627,\"longitude\":121.1897255},{\"latitude\":24.9685992,\"longitude\":121.1896806},{\"latitude\":24.9685643,\"longitude\":121.1896518},{\"latitude\":24.9685312,\"longitude\":121.1896255},{\"latitude\":24.9685026,\"longitude\":121.189605},{\"latitude\":24.9684683,\"longitude\":121.1895795},{\"latitude\":24.9684134,\"longitude\":121.1895658},{\"latitude\":24.9683707,\"longitude\":121.189555},{\"latitude\":24.968319,\"longitude\":121.1895508},{\"latitude\":24.9682736,\"longitude\":121.1895434},{\"latitude\":24.9681986,\"longitude\":121.1895406},{\"latitude\":24.9681288,\"longitude\":121.1895409},{\"latitude\":24.9680702,\"longitude\":121.1895426},{\"latitude\":24.968012,\"longitude\":121.1895413},{\"latitude\":24.9679482,\"longitude\":121.1895387},{\"latitude\":24.967881,\"longitude\":121.1895606},{\"latitude\":24.967835,\"longitude\":121.189578},{\"latitude\":24.9677821,\"longitude\":121.189604},{\"latitude\":24.9677319,\"longitude\":121.189633},{\"latitude\":24.967668,\"longitude\":121.1896765},{\"latitude\":24.9676555,\"longitude\":121.1897043},{\"latitude\":24.9676179,\"longitude\":121.1897779},{\"latitude\":24.967598,\"longitude\":121.1898349},{\"latitude\":24.9675736,\"longitude\":121.1898854},{\"latitude\":24.9675677,\"longitude\":121.1898999},{\"latitude\":24.9675782,\"longitude\":121.1899873},{\"latitude\":24.9675924,\"longitude\":121.1900347},{\"latitude\":24.9676253,\"longitude\":121.190081},{\"latitude\":24.967655,\"longitude\":121.1901309},{\"latitude\":24.9676922,\"longitude\":121.190178},{\"latitude\":24.9677506,\"longitude\":121.1902131},{\"latitude\":24.9678197,\"longitude\":121.1902371},{\"latitude\":24.9678747,\"longitude\":121.1902593},{\"latitude\":24.9679273,\"longitude\":121.1902705},{\"latitude\":24.9679868,\"longitude\":121.1902775},{\"latitude\":24.9680447,\"longitude\":121.1902882},{\"latitude\":24.9680826,\"longitude\":121.1903053},{\"latitude\":24.968061,\"longitude\":121.1903325},{\"latitude\":24.968133,\"longitude\":121.1903418},{\"latitude\":24.9681879,\"longitude\":121.1903513},{\"latitude\":24.9682486,\"longitude\":121.1903578},{\"latitude\":24.9682627,\"longitude\":121.1903653},{\"latitude\":24.9683028,\"longitude\":121.1903725},{\"latitude\":24.9683456,\"longitude\":121.1903724},{\"latitude\":24.9683903,\"longitude\":121.1903761},{\"latitude\":24.9684107,\"longitude\":121.1903815},{\"latitude\":24.9683778,\"longitude\":121.1903726},{\"latitude\":24.9684658,\"longitude\":121.1903552},{\"latitude\":24.9685293,\"longitude\":121.1903367},{\"latitude\":24.9685882,\"longitude\":121.190295},{\"latitude\":24.9686214,\"longitude\":121.1902307},{\"latitude\":24.968647,\"longitude\":121.1901626},{\"latitude\":24.9686709,\"longitude\":121.1900869},{\"latitude\":24.9686739,\"longitude\":121.1900197},{\"latitude\":24.96867,\"longitude\":121.1899701},{\"latitude\":24.9686447,\"longitude\":121.189939},{\"latitude\":24.9686412,\"longitude\":121.189889},{\"latitude\":24.9686225,\"longitude\":121.1898454},{\"latitude\":24.9686104,\"longitude\":121.1898018},{\"latitude\":24.9685848,\"longitude\":121.1897576},{\"latitude\":24.9685687,\"longitude\":121.1897308},{\"latitude\":24.9685461,\"longitude\":121.1897077},{\"latitude\":24.9685281,\"longitude\":121.1896823},{\"latitude\":24.9685076,\"longitude\":121.1896582},{\"latitude\":24.968478,\"longitude\":121.1896426},{\"latitude\":24.96845,\"longitude\":121.1896248},{\"latitude\":24.9684237,\"longitude\":121.1896125},{\"latitude\":24.9683887,\"longitude\":121.1895972},{\"latitude\":24.9684008,\"longitude\":121.1895888},{\"latitude\":24.9683285,\"longitude\":121.1895753},{\"latitude\":24.9682712,\"longitude\":121.1895666},{\"latitude\":24.9682266,\"longitude\":121.1895588},{\"latitude\":24.9681948,\"longitude\":121.1895405},{\"latitude\":24.968147,\"longitude\":121.1895474},{\"latitude\":24.9680959,\"longitude\":121.1895489},{\"latitude\":24.9680476,\"longitude\":121.1895438},{\"latitude\":24.9679846,\"longitude\":121.1895283},{\"latitude\":24.9679338,\"longitude\":121.1895098},{\"latitude\":24.9678821,\"longitude\":121.1895128},{\"latitude\":24.9678342,\"longitude\":121.1895266},{\"latitude\":24.9677902,\"longitude\":121.1895505},{\"latitude\":24.967746,\"longitude\":121.1895764},{\"latitude\":24.9677032,\"longitude\":121.1896146},{\"latitude\":24.9676741,\"longitude\":121.1896611},{\"latitude\":24.9676495,\"longitude\":121.1897095},{\"latitude\":24.9676351,\"longitude\":121.1898146},{\"latitude\":24.9676349,\"longitude\":121.1899205},{\"latitude\":24.9676488,\"longitude\":121.1900066},{\"latitude\":24.9676763,\"longitude\":121.1900804},{\"latitude\":24.9677051,\"longitude\":121.1901324},{\"latitude\":24.9677357,\"longitude\":121.1901939},{\"latitude\":24.9677939,\"longitude\":121.1902249},{\"latitude\":24.9678384,\"longitude\":121.1902637},{\"latitude\":24.9678863,\"longitude\":121.1902822},{\"latitude\":24.9679195,\"longitude\":121.1902896},{\"latitude\":24.9679521,\"longitude\":121.1902887},{\"latitude\":24.9679861,\"longitude\":121.1902935},{\"latitude\":24.9680207,\"longitude\":121.1902985},{\"latitude\":24.9680578,\"longitude\":121.1903125},{\"latitude\":24.9680732,\"longitude\":121.1903441},{\"latitude\":24.9681331,\"longitude\":121.1903463},{\"latitude\":24.9681895,\"longitude\":121.1903403},{\"latitude\":24.9682391,\"longitude\":121.1903409},{\"latitude\":24.9682479,\"longitude\":121.1903359},{\"latitude\":24.9682757,\"longitude\":121.1903277},{\"latitude\":24.9683103,\"longitude\":121.1903181},{\"latitude\":24.9683653,\"longitude\":121.1903073},{\"latitude\":24.96841,\"longitude\":121.190296},{\"latitude\":24.9684747,\"longitude\":121.1902686},{\"latitude\":24.9684986,\"longitude\":121.1901852},{\"latitude\":24.9685556,\"longitude\":121.1901664},{\"latitude\":24.9685894,\"longitude\":121.1901237},{\"latitude\":24.9686255,\"longitude\":121.1900836},{\"latitude\":24.9686482,\"longitude\":121.1900427},{\"latitude\":24.9686747,\"longitude\":121.1899978},{\"latitude\":24.9686973,\"longitude\":121.1899566},{\"latitude\":24.9687144,\"longitude\":121.1899171},{\"latitude\":24.9687407,\"longitude\":121.1898654},{\"latitude\":24.9687965,\"longitude\":121.1898483},{\"latitude\":24.968806,\"longitude\":121.1897943},{\"latitude\":24.9687847,\"longitude\":121.1897429},{\"latitude\":24.9687707,\"longitude\":121.1896923},{\"latitude\":24.9687512,\"longitude\":121.1896513},{\"latitude\":24.9687191,\"longitude\":121.1896151},{\"latitude\":24.968684,\"longitude\":121.1895823},{\"latitude\":24.9686438,\"longitude\":121.1895542},{\"latitude\":24.9685925,\"longitude\":121.1895457},{\"latitude\":24.9684572,\"longitude\":121.1896164},{\"latitude\":24.9684085,\"longitude\":121.1895994},{\"latitude\":24.9683662,\"longitude\":121.1895839},{\"latitude\":24.9683137,\"longitude\":121.1895637},{\"latitude\":24.9682344,\"longitude\":121.1895919},{\"latitude\":24.9681581,\"longitude\":121.1896137},{\"latitude\":24.9681019,\"longitude\":121.1896205},{\"latitude\":24.9680432,\"longitude\":121.1896234},{\"latitude\":24.9679801,\"longitude\":121.1896324},{\"latitude\":24.9679226,\"longitude\":121.1896509},{\"latitude\":24.9678676,\"longitude\":121.1896714},{\"latitude\":24.967821,\"longitude\":121.1896947},{\"latitude\":24.9677857,\"longitude\":121.1897681},{\"latitude\":24.9677539,\"longitude\":121.189796},{\"latitude\":24.9677267,\"longitude\":121.18985},{\"latitude\":24.9677139,\"longitude\":121.1899384},{\"latitude\":24.9677487,\"longitude\":121.190044},{\"latitude\":24.9677461,\"longitude\":121.1900948},{\"latitude\":24.9677517,\"longitude\":121.1901516},{\"latitude\":24.9677528,\"longitude\":121.190198},{\"latitude\":24.9677599,\"longitude\":121.1902526},{\"latitude\":24.9677734,\"longitude\":121.1902616},{\"latitude\":24.9678029,\"longitude\":121.1903013},{\"latitude\":24.9678272,\"longitude\":121.1903313},{\"latitude\":24.9678622,\"longitude\":121.1903684},{\"latitude\":24.967882,\"longitude\":121.1904085},{\"latitude\":24.9678934,\"longitude\":121.1904437},{\"latitude\":24.9678904,\"longitude\":121.1904549},{\"latitude\":24.9678996,\"longitude\":121.1904743}]");
		pathVO.setPath_distance(Double.valueOf(1463));
		pathVO.setPath_lat(Double.valueOf(121.1903092));
		pathVO.setPath_lng(Double.valueOf(24.9679234));
		pathVO.setPath_pic(path_pic);
		String path_no = dao.insertPathFromWeb(pathVO);
		
		return path_no;
	}
	
	
}
